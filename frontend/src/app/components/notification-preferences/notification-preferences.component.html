<div class="preferences-container">
  <div class="header">
    <div class="header-content">
      <h1>üîî Configuraci√≥n de Notificaciones</h1>
      <p>Personaliza c√≥mo y cu√°ndo recibir notificaciones sobre tus consultas</p>
    </div>
  </div>

  <div class="preferences-grid" *ngIf="!loading">
    <!-- Notificaciones de Consultas -->
    <div class="preference-card">
      <div class="card-header">
        <div class="icon">üìß</div>
        <h2>Recordatorios por Email</h2>
      </div>
      <div class="card-content">
        <div class="preference-item">
          <label class="modern-switch">
            <input type="checkbox" [(ngModel)]="preferences.emailReminders">
            <span class="switch-slider"></span>
          </label>
          <div class="preference-info">
            <h3>Notificaciones de consultas</h3>
            <p>Recibe recordatorios autom√°ticos sobre las consultas programadas con tus pacientes</p>
          </div>
        </div>
        
        <div class="message-config" *ngIf="preferences.emailReminders">
          <div class="form-group">
            <label>Asunto del email:</label>
            <input type="text" [(ngModel)]="preferences.emailSubject" class="modern-input" placeholder="Asunto del recordatorio">
          </div>
          <div class="form-group">
            <label>Mensaje del email:</label>
            <textarea [(ngModel)]="preferences.emailBody" class="modern-textarea" rows="4" placeholder="Contenido del mensaje de recordatorio"></textarea>
          </div>
        </div>
      </div>
    </div>

    <!-- Notificaciones WhatsApp -->
    <div class="preference-card">
      <div class="card-header">
        <div class="icon">üí¨</div>
        <h2>Recordatorios por WhatsApp</h2>
      </div>
      <div class="card-content">
        <div class="preference-item">
          <label class="modern-switch">
            <input type="checkbox" [(ngModel)]="preferences.whatsappReminders">
            <span class="switch-slider"></span>
          </label>
          <div class="preference-info">
            <h3>Alertas instant√°neas</h3>
            <p>Recibe notificaciones inmediatas sobre cambios en tu agenda y nuevas citas</p>
          </div>
        </div>
        
        <div class="message-config" *ngIf="preferences.whatsappReminders">
          <div class="form-group">
            <label>Anticipaci√≥n para WhatsApp:</label>
            <select [(ngModel)]="preferences.whatsappHours" class="modern-select">
              <option value="1">1 hora antes</option>
              <option value="2">2 horas antes</option>
              <option value="4">4 horas antes</option>
              <option value="6">6 horas antes</option>
              <option value="12">12 horas antes</option>
            </select>
          </div>
          <div class="form-group">
            <label>Mensaje de WhatsApp:</label>
            <textarea [(ngModel)]="preferences.whatsappMessage" class="modern-textarea" rows="3" placeholder="Mensaje de recordatorio por WhatsApp"></textarea>
          </div>
        </div>
      </div>
    </div>

    <!-- Configuraci√≥n de Tiempo -->
    <div class="preference-card full-width">
      <div class="card-header">
        <div class="icon">‚è∞</div>
        <h2>Configuraci√≥n de Tiempo</h2>
      </div>
      <div class="card-content">
        <div class="time-config">
          <div class="time-option">
            <label>Anticipaci√≥n para recordatorios:</label>
            <select [(ngModel)]="preferences.reminderHours" class="modern-select">
              <option value="1">1 hora antes</option>
              <option value="2">2 horas antes</option>
              <option value="6">6 horas antes</option>
              <option value="12">12 horas antes</option>
              <option value="24">24 horas antes</option>
              <option value="48">48 horas antes</option>
            </select>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="actions" *ngIf="!loading">
    <button class="btn-save" (click)="savePreferences()" [disabled]="saving">
      <span class="btn-icon">üíæ</span>
      {{ saving ? 'Guardando...' : 'Guardar Configuraci√≥n' }}
    </button>
  </div>

  <div class="loading-state" *ngIf="loading">
    <div class="loading-spinner"></div>
    <p>Cargando configuraci√≥n...</p>
  </div>
</div>