<div class="admin-container">
  <!-- Header -->
  <div class="header">
    <h1>üõ°Ô∏è Panel de Administraci√≥n</h1>
  </div>

  <!-- Menu Tabs -->
  <div class="menu-tabs">
    <button 
      class="tab-btn" 
      [class.active]="activeTab === 'users'"
      (click)="activeTab = 'users'">
      üë• Usuarios
    </button>
    <button 
      class="tab-btn" 
      [class.active]="activeTab === 'patients'"
      (click)="activeTab = 'patients'">
      üßë‚Äç‚öïÔ∏è Pacientes
    </button>
    <button 
      class="tab-btn" 
      [class.active]="activeTab === 'appointments'"
      (click)="activeTab = 'appointments'">
      üìÖ Turnos
    </button>
    <button 
      class="tab-btn" 
      [class.active]="activeTab === 'specialties'"
      (click)="activeTab = 'specialties'">
      üè• Especialidades
    </button>
    <button 
      class="tab-btn" 
      [class.active]="activeTab === 'reports'"
      (click)="activeTab = 'reports'">
      üìä Reportes
    </button>
    <button 
      class="tab-btn" 
      [class.active]="activeTab === 'permissions'"
      (click)="activeTab = 'permissions'"
      *ngIf="currentUser?.role === 'master'">
      üîê Permisos
    </button>
  </div>

  <!-- Users Section -->
  <div class="section-content" *ngIf="activeTab === 'users'">
    <div class="section-header">
      <h2>Gesti√≥n de Usuarios</h2>
      <div class="header-actions">
        <button class="btn-danger" (click)="deleteTestUsers()" *ngIf="currentUser?.role === 'master'">
          üóëÔ∏è Limpiar Pruebas
        </button>
        <button class="btn-create" (click)="showCreateForm = !showCreateForm">
          {{ showCreateForm ? 'Cancelar' : '+ Crear Usuario' }}
        </button>
      </div>
    </div>

    <!-- Create User Form -->
    <div class="create-form" *ngIf="showCreateForm">
    <div class="form-card">
      <h3>Crear Nuevo Usuario</h3>
      
      <div class="form-grid">
        <div class="form-group">
          <label>Email *</label>
          <input type="email" [(ngModel)]="newUser.email" placeholder="usuario@ejemplo.com">
        </div>
        
        <div class="form-group">
          <label>Contrase√±a *</label>
          <input type="password" [(ngModel)]="newUser.password" placeholder="M√≠nimo 8 caracteres">
        </div>
        
        <div class="form-group">
          <label>Rol *</label>
          <select [(ngModel)]="newUser.role">
            <option *ngFor="let role of roles" [value]="role.value">{{ role.label }}</option>
          </select>
        </div>
        
        <div class="form-group">
          <label>Nombre *</label>
          <input type="text" [(ngModel)]="newUser.firstName" placeholder="Nombre">
        </div>
        
        <div class="form-group">
          <label>Apellido *</label>
          <input type="text" [(ngModel)]="newUser.lastName" placeholder="Apellido">
        </div>
        
        <div class="form-group">
          <label>DNI</label>
          <input type="text" [(ngModel)]="newUser.dni" placeholder="12345678">
        </div>
        
        <div class="form-group">
          <label>Tel√©fono</label>
          <input type="text" [(ngModel)]="newUser.phone" placeholder="+54911123456">
        </div>
        
        <div class="form-group" *ngIf="newUser.role === 'professional'">
          <label>Especialidad</label>
          <select [(ngModel)]="newUser.specialty">
            <option value="">Seleccionar especialidad</option>
            <option *ngFor="let specialty of specialties" [value]="specialty.name">{{ specialty.name }}</option>
          </select>
        </div>
        
        <div class="form-group" *ngIf="newUser.role === 'professional'">
          <label>Matr√≠cula</label>
          <input type="text" [(ngModel)]="newUser.licenseNumber" placeholder="MP12345">
        </div>
      </div>
      
      <div class="form-actions">
        <button class="btn-save" (click)="createUser()">Crear Usuario</button>
        <button class="btn-cancel" (click)="showCreateForm = false; resetForm()">Cancelar</button>
      </div>
    </div>
  </div>

  <!-- Loading -->
  <div class="loading" *ngIf="loading">
    <div class="spinner"></div>
    <p>Cargando usuarios...</p>
  </div>

  <!-- Users Table -->
  <div class="users-section" *ngIf="!loading">
    <div class="table-card">
      <h3>Usuarios del Sistema ({{ users.length }})</h3>
      
      <div class="table-container">
        <table class="users-table">
          <thead>
            <tr>
              <th>Usuario</th>
              <th>Rol</th>
              <th>Estado</th>
              <th>Informaci√≥n</th>
              <th>Fecha Creaci√≥n</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let user of users" [class.inactive]="!user.isActive">
              <td>
                <div class="user-info">
                  <div class="user-avatar">
                    {{ (user.profile?.firstName || 'U').charAt(0) }}
                  </div>
                  <div class="user-details">
                    <strong>{{ user.profile?.firstName }} {{ user.profile?.lastName }}</strong>
                    <small>{{ user.email }}</small>
                  </div>
                </div>
              </td>
              
              <td>
                <span class="role-badge" [class]="user.role">
                  {{ getRoleLabel(user.role) }}
                </span>
              </td>
              
              <td>
                <span class="status" [class]="user.isActive ? 'active' : 'inactive'">
                  {{ user.isActive ? 'Activo' : 'Inactivo' }}
                </span>
              </td>
              
              <td>
                <div class="info-details">
                  <div *ngIf="user.profile?.dni">DNI: {{ user.profile.dni }}</div>
                  <div *ngIf="user.profile?.phone">Tel: {{ user.profile.phone }}</div>
                  <div *ngIf="user.professional?.specialty">{{ user.professional.specialty }}</div>
                  <div *ngIf="user.professional?.licenseNumber">MP: {{ user.professional.licenseNumber }}</div>
                </div>
              </td>
              
              <td>
                {{ user.createdAt | date:'dd/MM/yyyy' }}
              </td>
              
              <td>
                <div class="actions">
                  <button 
                    class="btn-edit" 
                    (click)="editUser(user)"
                    [disabled]="!canManageUser(user)"
                    title="Editar">
                    ‚úèÔ∏è
                  </button>
                  
                  <button 
                    class="btn-toggle" 
                    (click)="toggleUserStatus(user)"
                    [disabled]="!canManageUser(user)"
                    [title]="user.isActive ? 'Desactivar' : 'Activar'">
                    {{ user.isActive ? 'üîí' : 'üîì' }}
                  </button>
                  
                  <button 
                    class="btn-delete" 
                    (click)="deleteUser(user)"
                    [disabled]="!canDeleteUser(user)"
                    *ngIf="canDeleteUser(user)"
                    title="Eliminar">
                    üóëÔ∏è
                  </button>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  </div>

  <!-- Patients Section -->
  <div class="section-content" *ngIf="activeTab === 'patients'">
    <div class="section-header">
      <h2>Registro de Pacientes</h2>
      <button class="btn-create" (click)="showCreatePatient = !showCreatePatient">
        {{ showCreatePatient ? 'Cancelar' : '+ Registrar Paciente' }}
      </button>
    </div>

    <!-- Create Patient Form -->
    <div class="create-form" *ngIf="showCreatePatient">
      <div class="form-card">
        <h3>Registrar Nuevo Paciente</h3>
        
        <div class="form-grid">
          <div class="form-group">
            <label>Email *</label>
            <input type="email" [(ngModel)]="newPatient.email" placeholder="paciente@ejemplo.com">
          </div>
          
          <div class="form-group">
            <label>Nombre *</label>
            <input type="text" [(ngModel)]="newPatient.firstName" placeholder="Nombre">
          </div>
          
          <div class="form-group">
            <label>Apellido *</label>
            <input type="text" [(ngModel)]="newPatient.lastName" placeholder="Apellido">
          </div>
          
          <div class="form-group">
            <label>DNI *</label>
            <input type="text" [(ngModel)]="newPatient.dni" placeholder="12345678">
          </div>
          
          <div class="form-group">
            <label>Tel√©fono</label>
            <input type="text" [(ngModel)]="newPatient.phone" placeholder="+54911123456">
          </div>
          
          <div class="form-group">
            <label>Edad</label>
            <input type="number" [(ngModel)]="newPatient.age" placeholder="25">
          </div>
          
          <div class="form-group">
            <label>G√©nero</label>
            <select [(ngModel)]="newPatient.gender">
              <option value="">Seleccionar</option>
              <option value="M">Masculino</option>
              <option value="F">Femenino</option>
              <option value="Other">Otro</option>
            </select>
          </div>
          
          <div class="form-group full-width">
            <label>Direcci√≥n</label>
            <input type="text" [(ngModel)]="newPatient.address" placeholder="Direcci√≥n completa">
          </div>
        </div>
        
        <div class="form-options">
          <label class="checkbox-label">
            <input type="checkbox" [(ngModel)]="createAndSchedule">
            Crear paciente y agendar turno inmediatamente
          </label>
        </div>
        
        <div class="form-actions">
          <button class="btn-save" (click)="createPatient()">{{ createAndSchedule ? 'Crear y Agendar' : 'Crear Paciente' }}</button>
          <button class="btn-cancel" (click)="showCreatePatient = false; resetPatientForm()">Cancelar</button>
        </div>
      </div>
    </div>

    <!-- Patients List -->
    <div class="patients-section" *ngIf="!loading">
      <div class="table-card">
        <h3>Pacientes Registrados ({{ patients.length }})</h3>
        
        <div class="search-bar">
          <input 
            type="text" 
            placeholder="Buscar paciente por nombre, DNI o email..."
            [(ngModel)]="patientSearchTerm"
            (input)="filterPatients()"
            class="search-input">
        </div>
        
        <div class="table-container">
          <table class="patients-table">
            <thead>
              <tr>
                <th>Paciente</th>
                <th>DNI</th>
                <th>Contacto</th>
                <th>Edad</th>
                <th>Registro</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let patient of filteredPatients">
                <td>
                  <div class="patient-info">
                    <div class="patient-avatar">
                      {{ (patient.profile?.firstName || 'P').charAt(0) }}
                    </div>
                    <div class="patient-details">
                      <strong>{{ patient.profile?.firstName }} {{ patient.profile?.lastName }}</strong>
                      <small>{{ patient.email }}</small>
                    </div>
                  </div>
                </td>
                <td>{{ patient.profile?.dni || 'Sin DNI' }}</td>
                <td>
                  <div class="contact-info">
                    <div *ngIf="patient.profile?.phone">{{ patient.profile.phone }}</div>
                    <div *ngIf="patient.profile?.address" class="address">{{ patient.profile.address }}</div>
                  </div>
                </td>
                <td>{{ patient.profile?.age || '-' }}</td>
                <td>{{ patient.createdAt | date:'dd/MM/yyyy' }}</td>
                <td>
                  <div class="actions">
                    <button 
                      class="btn-action btn-schedule"
                      (click)="scheduleForPatient(patient)"
                      title="Agendar turno">
                      üìÖ
                    </button>
                    <button 
                      class="btn-action btn-edit"
                      (click)="editPatient(patient)"
                      title="Editar">
                      ‚úèÔ∏è
                    </button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <!-- Appointments Section -->
  <div class="section-content" *ngIf="activeTab === 'appointments'">
    <app-admin-appointments></app-admin-appointments>
  </div>

  <!-- Reports Section -->
  <div class="section-content" *ngIf="activeTab === 'reports'">
    <div class="section-header">
      <h2>Reportes y Analytics</h2>
      <button class="btn-create" (click)="generateReport()">
        üìà Generar Reporte
      </button>
    </div>

    <!-- Filtros de Reporte -->
    <div class="report-filters">
      <div class="filter-row">
        <div class="filter-group">
          <label>Per√≠odo</label>
          <select [(ngModel)]="reportFilters.period" class="filter-select">
            <option value="day">D√≠a</option>
            <option value="week">Semana</option>
            <option value="month">Mes</option>
            <option value="custom">Personalizado</option>
          </select>
        </div>
        
        <div class="filter-group" *ngIf="reportFilters.period === 'custom'">
          <label>Fecha Inicio</label>
          <input type="date" [(ngModel)]="reportFilters.startDate" class="filter-input">
        </div>
        
        <div class="filter-group" *ngIf="reportFilters.period === 'custom'">
          <label>Fecha Fin</label>
          <input type="date" [(ngModel)]="reportFilters.endDate" class="filter-input">
        </div>
        
        <div class="filter-group">
          <label>Profesional</label>
          <select [(ngModel)]="reportFilters.professionalId" class="filter-select">
            <option value="">Todos los profesionales</option>
            <option *ngFor="let prof of professionals" [value]="prof.id">
              {{prof.name}} - {{prof.specialty}}
            </option>
          </select>
        </div>
      </div>
    </div>

    <!-- M√©tricas Principales -->
    <div class="metrics-grid" *ngIf="reportData">
      <div class="metric-card">
        <div class="metric-icon">üìÖ</div>
        <div class="metric-content">
          <h3>{{reportData.totalAppointments}}</h3>
          <p>Total Turnos</p>
        </div>
      </div>
      
      <div class="metric-card">
        <div class="metric-icon">‚úÖ</div>
        <div class="metric-content">
          <h3>{{reportData.completedAppointments}}</h3>
          <p>Completados</p>
        </div>
      </div>
      
      <div class="metric-card">
        <div class="metric-icon">‚ùå</div>
        <div class="metric-content">
          <h3>{{reportData.cancelledAppointments}}</h3>
          <p>Cancelados</p>
        </div>
      </div>
      
      <div class="metric-card">
        <div class="metric-icon">üí∞</div>
        <div class="metric-content">
          <h3>${{reportData.totalRevenue | number:'1.0-0'}}</h3>
          <p>Ingresos</p>
        </div>
      </div>
    </div>

    <!-- Gr√°ficos y Detalles -->
    <div class="report-details" *ngIf="reportData">
      <div class="chart-section">
        <h3>Distribuci√≥n de Turnos</h3>
        <div class="chart-placeholder">
          <div class="chart-bar" 
               *ngFor="let item of reportData.appointmentsByStatus" 
               [style.height.%]="(item.count / reportData.totalAppointments) * 100">
            <span class="bar-label">{{item.status}}: {{item.count}}</span>
          </div>
        </div>
      </div>
      
      <div class="summary-section">
        <h3>Resumen Financiero</h3>
        <div class="summary-item">
          <span>Ingresos Totales:</span>
          <strong>${{reportData.totalRevenue | number:'1.0-0'}}</strong>
        </div>
        <div class="summary-item">
          <span>Pagos Pendientes:</span>
          <strong>${{reportData.pendingPayments | number:'1.0-0'}}</strong>
        </div>
        <div class="summary-item">
          <span>Reembolsos:</span>
          <strong>${{reportData.refunds | number:'1.0-0'}}</strong>
        </div>
      </div>
    </div>

    <!-- Acciones de Exportaci√≥n -->
    <div class="export-actions" *ngIf="reportData">
      <button class="btn-export" (click)="exportToPDF()">
        üìÑ Exportar PDF
      </button>
      <button class="btn-export" (click)="exportToExcel()">
        üìä Exportar Excel
      </button>
    </div>
  </div>

  <!-- Permissions Section -->
  <div class="section-content" *ngIf="activeTab === 'permissions'">
    <div class="section-header">
      <h2>Gesti√≥n de Permisos y Roles</h2>
      <div class="header-actions">
        <button class="btn-secondary" (click)="resetPermissionsToDefault()">
          üîÑ Restaurar Valores por Defecto
        </button>
        <button class="btn-create" (click)="showUserLogs = !showUserLogs">
          {{ showUserLogs ? 'Ocultar Logs' : 'üìÑ Ver Logs' }}
        </button>
      </div>
    </div>

    <!-- Configuraci√≥n de Roles -->
    <div class="permissions-grid">
      <div class="role-config-section">
        <h3>Configuraci√≥n de Permisos por Rol</h3>
        <p class="section-description">Configure qu√© funciones puede acceder cada tipo de usuario. Los cambios se aplican inmediatamente.</p>
        
        <div class="role-cards">
          <div class="role-card" *ngFor="let role of currentRolePermissions">
            <div class="role-header">
              <div class="role-info">
                <h4>{{ role.name }}</h4>
                <span class="role-badge" [ngClass]="role.key">{{ role.key }}</span>
              </div>
              <div class="role-stats">
                <span class="permissions-count">
                  {{ getEnabledPermissionsCount(role) }}/{{ role.permissions.length }} activos
                </span>
              </div>
            </div>
            
            <div class="permissions-list">
              <div class="permission-item" *ngFor="let permission of role.permissions">
                <label class="permission-label">
                  <input 
                    type="checkbox" 
                    [checked]="permission.enabled"
                    (change)="onPermissionToggle(role.key, permission.key, $event)"
                    class="permission-checkbox">
                  <div class="permission-info">
                    <span class="permission-name">{{ permission.name }}</span>
                    <span class="permission-description">{{ permission.description }}</span>
                  </div>
                </label>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Vista Previa del Men√∫ -->
      <div class="menu-preview-section">
        <h3>Vista Previa del Men√∫ por Rol</h3>
        <p class="section-description">Vea c√≥mo se ver√° el men√∫ de navegaci√≥n para cada tipo de usuario.</p>
        
        <div class="role-selector">
          <label>Seleccionar rol para vista previa:</label>
          <select [(ngModel)]="previewRole" (change)="updateMenuPreview()" class="role-select">
            <option *ngFor="let role of currentRolePermissions" [value]="role.key">
              {{ role.name }}
            </option>
          </select>
        </div>
        
        <div class="menu-preview" *ngIf="previewMenuOptions.length > 0">
          <div class="preview-menu-item" *ngFor="let option of previewMenuOptions">
            <span class="preview-icon">{{ option.icon }}</span>
            <span class="preview-label">{{ option.label }}</span>
            <span class="preview-route">{{ option.route }}</span>
          </div>
        </div>
        
        <div class="no-menu-options" *ngIf="previewMenuOptions.length === 0">
          <p>Este rol no tiene opciones de men√∫ disponibles</p>
        </div>
      </div>
    </div>

    <!-- Gesti√≥n de Usuarios Avanzada -->
    <div class="user-management-section">
      <h3>Gesti√≥n Avanzada de Usuarios</h3>
      <p class="section-description">Controle el estado y acceso de los usuarios del sistema.</p>
      
      <div class="user-actions-grid">
        <div class="action-card" *ngFor="let user of users">
          <div class="user-summary">
            <div class="user-avatar-small">
              {{ (user.profile?.firstName || 'U').charAt(0) }}
            </div>
            <div class="user-info-compact">
              <strong>{{ user.profile?.firstName }} {{ user.profile?.lastName }}</strong>
              <small>{{ user.email }}</small>
              <span class="role-badge-small" [ngClass]="user.role">{{ getRoleLabel(user.role) }}</span>
              <span class="user-status" [class]="user.isActive ? 'active' : 'inactive'">
                {{ user.isActive ? 'Activo' : 'Inactivo' }}
              </span>
            </div>
          </div>
          
          <div class="user-controls">
            <button 
              class="btn-control"
              [class.active]="user.isActive"
              (click)="toggleUserStatus(user)"
              [disabled]="!canManageUser(user)"
              title="{{ user.isActive ? 'Desactivar' : 'Activar' }} usuario">
              {{ user.isActive ? 'üîí' : 'üîì' }}
            </button>
            
            <button 
              class="btn-control btn-reset"
              (click)="resetUserPassword(user)"
              [disabled]="!canManageUser(user)"
              title="Resetear contrase√±a">
              üîÑ
            </button>
            
            <button 
              class="btn-control btn-logs"
              (click)="viewUserActivity(user)"
              title="Ver actividad">
              üìÑ
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Logs de Actividad -->
    <div class="logs-section" *ngIf="showUserLogs">
      <div class="logs-header">
        <h3>Logs de Actividad del Sistema</h3>
        <button class="btn-secondary" (click)="refreshLogs()">
          üîÑ Actualizar
        </button>
      </div>
      
      <div class="logs-container">
        <div class="log-entry" *ngFor="let log of systemLogs" [ngClass]="log.type">
          <div class="log-timestamp">{{ log.timestamp | date:'dd/MM/yyyy HH:mm:ss' }}</div>
          <div class="log-user">{{ log.user }}</div>
          <div class="log-action">{{ log.action }}</div>
          <div class="log-details">{{ log.details }}</div>
        </div>
        
        <div class="no-logs" *ngIf="systemLogs.length === 0">
          <div class="empty-state">
            <span class="empty-icon">üìÑ</span>
            <p>No hay logs de actividad disponibles</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Specialties Section -->
  <div class="section-content" *ngIf="activeTab === 'specialties'">
    <div class="section-header">
      <h2>Gesti√≥n de Especialidades</h2>
      <button class="btn-create" (click)="showCreateSpecialty = !showCreateSpecialty">
        {{ showCreateSpecialty ? 'Cancelar' : '+ Crear Especialidad' }}
      </button>
    </div>

    <!-- Create Specialty Form -->
    <div class="create-form" *ngIf="showCreateSpecialty">
      <div class="form-card">
        <h3>Crear Nueva Especialidad</h3>
        
        <div class="form-grid">
          <div class="form-group">
            <label>Nombre *</label>
            <input type="text" [(ngModel)]="newSpecialty.name" placeholder="Cardiolog√≠a">
          </div>
          
          <div class="form-group">
            <label>Descripci√≥n</label>
            <textarea [(ngModel)]="newSpecialty.description" placeholder="Descripci√≥n de la especialidad" rows="3"></textarea>
          </div>
        </div>
        
        <div class="form-actions">
          <button class="btn-save" (click)="createSpecialty()">Crear Especialidad</button>
          <button class="btn-cancel" (click)="showCreateSpecialty = false; resetSpecialtyForm()">Cancelar</button>
        </div>
      </div>
    </div>

    <!-- Specialties List -->
    <div class="specialties-section" *ngIf="!loading">
      <div class="table-card">
        <h3>Especialidades ({{ specialties.length }})</h3>
        
        <div class="table-container">
          <table class="specialties-table">
            <thead>
              <tr>
                <th>Nombre</th>
                <th>Descripci√≥n</th>
                <th>Estado</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let specialty of specialties">
                <td><strong>{{ specialty.name }}</strong></td>
                <td>{{ specialty.description || 'Sin descripci√≥n' }}</td>
                <td>
                  <span class="status" [class]="specialty.isActive ? 'active' : 'inactive'">
                    {{ specialty.isActive ? 'Activa' : 'Inactiva' }}
                  </span>
                </td>
                <td>
                  <div class="actions">
                    <button class="btn-toggle" (click)="toggleSpecialtyStatus(specialty)">
                      {{ specialty.isActive ? 'üîí' : 'üîì' }}
                    </button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
    <!-- Edit User Form -->
    <div class="create-form" *ngIf="showEditForm">
      <div class="form-card">
        <h3>Editar Usuario</h3>
        
        <div class="form-grid">
          <div class="form-group">
            <label>Email *</label>
            <input type="email" [(ngModel)]="editingUser.email" placeholder="usuario@ejemplo.com">
          </div>
          
          <div class="form-group">
            <label>Nueva Contrase√±a</label>
            <input type="password" [(ngModel)]="editingUser.password" placeholder="Dejar vac√≠o para no cambiar">
          </div>
          
          <div class="form-group">
            <label>Rol *</label>
            <select [(ngModel)]="editingUser.role">
              <option *ngFor="let role of roles" [value]="role.value">{{ role.label }}</option>
            </select>
          </div>
          
          <div class="form-group">
            <label>Nombre *</label>
            <input type="text" [(ngModel)]="editingUser.firstName" placeholder="Nombre">
          </div>
          
          <div class="form-group">
            <label>Apellido *</label>
            <input type="text" [(ngModel)]="editingUser.lastName" placeholder="Apellido">
          </div>
          
          <div class="form-group">
            <label>DNI</label>
            <input type="text" [(ngModel)]="editingUser.dni" placeholder="12345678">
          </div>
          
          <div class="form-group">
            <label>Tel√©fono</label>
            <input type="text" [(ngModel)]="editingUser.phone" placeholder="+54911123456">
          </div>
          
          <div class="form-group" *ngIf="editingUser.role === 'professional'">
            <label>Especialidad</label>
            <select [(ngModel)]="editingUser.specialty">
              <option value="">Seleccionar especialidad</option>
              <option *ngFor="let specialty of specialties" [value]="specialty.name">{{ specialty.name }}</option>
            </select>
          </div>
          
          <div class="form-group" *ngIf="editingUser.role === 'professional'">
            <label>Matr√≠cula</label>
            <input type="text" [(ngModel)]="editingUser.licenseNumber" placeholder="MP12345">
          </div>
        </div>
        
        <div class="form-actions">
          <button class="btn-save" (click)="updateUser()">Actualizar Usuario</button>
          <button class="btn-cancel" (click)="cancelEdit()">Cancelar</button>
        </div>
      </div>
    </div>