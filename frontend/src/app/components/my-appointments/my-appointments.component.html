<div class="appointments-container">
  <div class="header">
    <button class="btn-back" (click)="goBack()">â† Volver</button>
    <h1>Mis Turnos</h1>
  </div>

  <div class="tabs-section">
    <button 
      class="tab-btn"
      [class.active]="activeTab === 'upcoming'"
      (click)="activeTab = 'upcoming'">
      PrÃ³ximos ({{ upcomingAppointments.length }})
    </button>
    <button 
      class="tab-btn"
      [class.active]="activeTab === 'history'"
      (click)="activeTab = 'history'">
      Historial ({{ pastAppointments.length }})
    </button>
  </div>

  <div class="filters-section">
    <select 
      [(ngModel)]="statusFilter"
      class="filter-select">
      <option value="">Todos los estados</option>
      <option value="confirmed">Confirmados</option>
      <option value="pending">Pendientes</option>
      <option value="completed">Completados</option>
      <option value="cancelled">Cancelados</option>
    </select>
  </div>

  <!-- Loading State -->
  <div class="loading-state" *ngIf="loading">
    <p>Cargando turnos...</p>
  </div>

  <!-- PrÃ³ximos Turnos -->
  <div class="appointments-list" *ngIf="activeTab === 'upcoming' && !loading">
    <div class="appointment-card" *ngFor="let apt of upcomingAppointments">
      <div class="apt-date">
        <div class="day">{{ apt.date | date:'dd' }}</div>
        <div class="month">{{ apt.date | date:'MMM' }}</div>
      </div>
      
      <div class="apt-info">
        <div class="apt-header">
          <h3>{{ apt.professional }}</h3>
          <span class="status" [class]="getStatusClass(apt.status)">
            {{ getStatusText(apt.status) }}
          </span>
        </div>
        
        <div class="apt-details">
          <p class="specialty">{{ apt.specialty }}</p>
          <p class="time">ğŸ• {{ apt.time }}</p>
          <p class="location">ğŸ“ {{ apt.location }}</p>
          <p class="price">ğŸ’° ${{ apt.price | number }}</p>
          <p class="notes" *ngIf="apt.notes">ğŸ“ {{ apt.notes }}</p>
        </div>
      </div>
      
      <div class="apt-actions">
        <button class="btn-details" (click)="viewDetails(apt)">Ver Detalles</button>
        <button 
          class="btn-reschedule" 
          *ngIf="canModifyAppointment(apt)"
          (click)="rescheduleAppointment(apt)">
          Reprogramar
        </button>
        <button 
          class="btn-cancel" 
          *ngIf="canModifyAppointment(apt)"
          (click)="cancelAppointment(apt)">
          Cancelar
        </button>
      </div>
    </div>

    <div class="empty-state" *ngIf="upcomingAppointments.length === 0">
      <div class="empty-icon">ğŸ“…</div>
      <h3>No tienes turnos prÃ³ximos</h3>
      <p>Â¡Agenda tu primera cita con un profesional!</p>
      <button class="btn-book" routerLink="/app/find-professionals">Buscar Profesionales</button>
    </div>
  </div>

  <!-- Historial -->
  <div class="appointments-list" *ngIf="activeTab === 'history' && !loading">
    <div class="appointment-card history" *ngFor="let apt of pastAppointments">
      <div class="apt-date">
        <div class="day">{{ apt.date | date:'dd' }}</div>
        <div class="month">{{ apt.date | date:'MMM' }}</div>
      </div>
      
      <div class="apt-info">
        <div class="apt-header">
          <h3>{{ apt.professional }}</h3>
          <span class="status" [class]="getStatusClass(apt.status)">
            {{ getStatusText(apt.status) }}
          </span>
        </div>
        
        <div class="apt-details">
          <p class="specialty">{{ apt.specialty }}</p>
          <p class="time">ğŸ• {{ apt.time }}</p>
          <p class="location">ğŸ“ {{ apt.location }}</p>
          <p class="price">ğŸ’° ${{ apt.price | number }}</p>
          <p class="notes" *ngIf="apt.notes">ğŸ“ {{ apt.notes }}</p>
        </div>
      </div>
      
      <div class="apt-actions">
        <button class="btn-details" (click)="viewDetails(apt)">Ver Detalles</button>
      </div>
    </div>

    <div class="empty-state" *ngIf="pastAppointments.length === 0">
      <div class="empty-icon">ğŸ“‹</div>
      <h3>No tienes historial de turnos</h3>
      <p>AquÃ­ aparecerÃ¡n tus citas pasadas</p>
    </div>
  </div>
</div>