<div class="dashboard-container">
  <!-- Sidebar Menu -->
  <div class="sidebar" [class.open]="sidebarOpen">
    <div class="sidebar-header">
      <h3>âš¡ Acciones RÃ¡pidas</h3>
      <button class="close-btn" (click)="toggleSidebar()">Ã—</button>
    </div>
    
    <div class="sidebar-menu">
      <div *ngIf="currentUser?.role === 'patient'" class="menu-item" routerLink="/app/find-professionals">
        <div class="menu-icon">ğŸ‘¨âš•ï¸</div>
        <div class="menu-text">
          <span class="menu-title">Buscar profesionales</span>
          <span class="menu-desc">Encuentra especialistas</span>
        </div>
      </div>

      <div class="menu-item" routerLink="/app/profile">
        <div class="menu-icon">ğŸ‘¤</div>
        <div class="menu-text">
          <span class="menu-title">Mi perfil</span>
          <span class="menu-desc">Actualizar informaciÃ³n</span>
        </div>
      </div>

      <div *ngIf="currentUser?.role === 'patient'" class="menu-item" routerLink="/app/my-appointments">
        <div class="menu-icon">ğŸ“…</div>
        <div class="menu-text">
          <span class="menu-title">Mis Turnos</span>
          <span class="menu-desc">Ver citas agendadas</span>
        </div>
      </div>

      <div *ngIf="currentUser?.role === 'patient'" class="menu-item" routerLink="/app/medical-history">
        <div class="menu-icon">ğŸ“‹</div>
        <div class="menu-text">
          <span class="menu-title">Historial mÃ©dico</span>
          <span class="menu-desc">Ver historial</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Hamburger Button -->
  <button class="hamburger-btn" (click)="toggleSidebar()">
    <span></span>
    <span></span>
    <span></span>
  </button>

  <!-- Sidebar Overlay -->
  <div class="sidebar-overlay" [class.active]="sidebarOpen" (click)="toggleSidebar()"></div>

  <!-- Main Content -->
  <div class="main-content" [class.sidebar-open]="sidebarOpen">
    <!-- Top Stats Cards -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon">ğŸ“…</div>
        <div class="stat-info">
          <h3>{{ upcomingAppointments?.length || 0 }}</h3>
          <p>PrÃ³ximas Citas</p>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">ğŸ‘¨âš•ï¸</div>
        <div class="stat-info">
          <h3>4</h3>
          <p>Profesionales</p>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">â­</div>
        <div class="stat-info">
          <h3>4.8</h3>
          <p>CalificaciÃ³n</p>
        </div>
      </div>
    </div>

    <!-- Main Dashboard Grid -->
    <div class="dashboard-grid">
      <!-- Calendar Section -->
      <div class="calendar-section">
        <div class="section-header">
          <h2>ğŸ“… Mi Calendario</h2>
          <div class="header-actions">
            <button class="btn-new-appointment" routerLink="/app/appointments">+ Nueva Cita</button>
          </div>
        </div>
        
        <div class="calendar-container">
          <div class="calendar-header">
            <button class="nav-btn" (click)="previousMonth()">â†</button>
            <div class="month-year-selector">
              <h3>{{ currentMonth }} {{ currentYear }}</h3>
              <button class="btn-today" (click)="goToToday()">Hoy</button>
            </div>
            <button class="nav-btn" (click)="nextMonth()">â†’</button>
          </div>
          
          <div class="calendar-wrapper">
            <div class="calendar-grid">
              <div class="day-header" *ngFor="let day of weekDays">{{ day }}</div>
              <div 
                class="calendar-day" 
                *ngFor="let day of calendarDays"
                [class.other-month]="!day.isCurrentMonth"
                [class.today]="day.isToday"
                [class.has-appointment]="day.hasAppointment"
                [class.weekend]="day.isWeekend"
                [class.selected]="selectedDate && day.date.toDateString() === selectedDate.toDateString()"
                (click)="onDateSelected(day)">
                <span class="day-number">{{ day.number }}</span>
                <div class="day-content">
                  <div class="appointments" *ngIf="day.appointments?.length">
                    <div 
                      class="appointment-dot" 
                      *ngFor="let apt of day.appointments"
                      [class]="'apt-' + apt.type">
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Appointments Section -->
      <div class="appointments-section">
        <div class="section-header">
          <h2>ğŸ•’ PrÃ³ximas Citas</h2>
          <button class="btn-view-all" routerLink="/app/my-appointments">Ver todas</button>
        </div>
        
        <div class="appointments-list">
          <div class="appointment-card" *ngFor="let apt of upcomingAppointments">
            <div class="apt-time">
              <span class="date">{{ apt.date }}</span>
              <span class="time">{{ apt.time }}</span>
            </div>
            <div class="apt-details">
              <h4>{{ apt.professional || apt.patient }}</h4>
              <p>{{ apt.specialty || apt.reason }}</p>
            </div>
            <div class="apt-status" [class]="apt.status">{{ apt.status }}</div>
          </div>
          
          <div class="empty-state" *ngIf="!upcomingAppointments?.length">
            <div class="empty-icon">ğŸ“…</div>
            <h3>No tienes citas prÃ³ximas</h3>
            <p>Agenda tu primera consulta</p>
            <button class="btn-schedule" routerLink="/app/find-professionals">Buscar Profesionales</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>