<div class="professional-profile-container">
  <div class="profile-header">
    <h1>Perfil Profesional</h1>
    <p>Gestiona tu informaci贸n profesional y configuraciones</p>
  </div>

  <div class="profile-content" *ngIf="!isLoading">
    <!-- Mensaje de estado -->
    <div *ngIf="message" class="message" [ngClass]="messageType">
      {{ message }}
    </div>

    <form (ngSubmit)="updateProfile()" #profileForm="ngForm">
      <!-- Informaci贸n Personal -->
      <div class="form-section">
        <h2>Informaci贸n Personal</h2>
        <div class="form-grid">
          <div class="form-group">
            <label for="firstName">Nombre</label>
            <input 
              type="text" 
              id="firstName" 
              name="firstName"
              [(ngModel)]="profile.firstName" 
              required>
          </div>
          <div class="form-group">
            <label for="lastName">Apellido</label>
            <input 
              type="text" 
              id="lastName" 
              name="lastName"
              [(ngModel)]="profile.lastName" 
              required>
          </div>
          <div class="form-group">
            <label for="email">Email</label>
            <input 
              type="email" 
              id="email" 
              name="email"
              [(ngModel)]="profile.email" 
              readonly
              class="readonly-field">
          </div>
          <div class="form-group">
            <label for="phone">Tel茅fono</label>
            <input 
              type="tel" 
              id="phone" 
              name="phone"
              [(ngModel)]="profile.phone">
          </div>
          <div class="form-group">
            <label for="birthDate">Fecha de Nacimiento</label>
            <input 
              type="date" 
              id="birthDate" 
              name="birthDate"
              [(ngModel)]="profile.birthDate">
          </div>
        </div>
        
        <div class="form-group full-width">
          <label for="address">Direcci贸n</label>
          <input 
            type="text" 
            id="address" 
            name="address"
            [(ngModel)]="profile.address"
            placeholder="Ingresa tu direcci贸n completa">
        </div>
      </div>

      <!-- Informaci贸n Profesional -->
      <div class="form-section">
        <h2>Informaci贸n Profesional</h2>
        <div class="form-grid">
          <div class="form-group">
            <label for="specialty">Especialidad</label>
            <select 
              id="specialty" 
              name="specialty"
              [(ngModel)]="profile.specialty" 
              required>
              <option value="">Seleccionar especialidad</option>
              <option *ngFor="let specialty of specialties" [value]="specialty.name">
                {{ specialty.name }}
              </option>
            </select>
          </div>
          <div class="form-group">
            <label for="subspecialty">Sub-especialidad</label>
            <input 
              type="text" 
              id="subspecialty" 
              name="subspecialty"
              [(ngModel)]="profile.subspecialty"
              placeholder="Ej: Cardiolog铆a Intervencionista">
          </div>
          <div class="form-group">
            <label for="licenseNumber">N煤mero de Matr铆cula</label>
            <input 
              type="text" 
              id="licenseNumber" 
              name="licenseNumber"
              [(ngModel)]="profile.licenseNumber">
          </div>
          <div class="form-group">
            <label for="experience">A帽os de Experiencia</label>
            <input 
              type="number" 
              id="experience" 
              name="experience"
              [(ngModel)]="profile.experience"
              min="0"
              max="50"
              placeholder="0">
          </div>
          <div class="form-group">
            <label for="consultationFee">Precio de Consulta ($)</label>
            <input 
              type="number" 
              id="consultationFee" 
              name="consultationFee"
              [(ngModel)]="profile.consultationFee"
              min="0"
              step="100"
              placeholder="5000">
          </div>
        </div>
        
        <div class="form-group full-width">
          <label for="education">Formaci贸n Acad茅mica</label>
          <textarea 
            id="education" 
            name="education"
            [(ngModel)]="profile.education" 
            rows="3"
            placeholder="Describe tu formaci贸n acad茅mica..."></textarea>
        </div>
        
        <div class="form-group full-width">
          <label for="description">Descripci贸n Profesional</label>
          <textarea 
            id="description" 
            name="description"
            [(ngModel)]="profile.description" 
            rows="4"
            maxlength="500"
            placeholder="Describe tu experiencia y enfoque profesional... (m谩x. 500 caracteres)"></textarea>
          <small class="char-counter">{{ (profile.description || '').length }}/500 caracteres</small>
        </div>
      </div>

      <!-- Imagen de Perfil -->
      <div class="form-section">
        <h2>Imagen de Perfil</h2>
        <div class="image-upload-section">
          <div class="current-image" *ngIf="profile.profileImage">
            <img [src]="profile.profileImage" alt="Imagen de perfil" class="profile-preview">
          </div>
          <div class="upload-area">
            <input 
              type="file" 
              id="profileImage" 
              name="profileImage"
              accept="image/*"
              (change)="onImageSelected($event)"
              class="file-input">
            <label for="profileImage" class="file-label">
              <span class="upload-icon"></span>
              <span>Seleccionar imagen</span>
            </label>
          </div>
        </div>
      </div>

      <!-- Redes Sociales -->
      <div class="form-section">
        <h2>Redes Sociales</h2>
        <div class="form-grid">
          <div class="form-group">
            <label for="facebook">Facebook</label>
            <input 
              type="url" 
              id="facebook" 
              name="facebook"
              [(ngModel)]="profile.socialNetworks.facebook"
              placeholder="https://facebook.com/tu-perfil">
          </div>
          <div class="form-group">
            <label for="instagram">Instagram</label>
            <input 
              type="url" 
              id="instagram" 
              name="instagram"
              [(ngModel)]="profile.socialNetworks.instagram"
              placeholder="https://instagram.com/tu-perfil">
          </div>
          <div class="form-group">
            <label for="linkedin">LinkedIn</label>
            <input 
              type="url" 
              id="linkedin" 
              name="linkedin"
              [(ngModel)]="profile.socialNetworks.linkedin"
              placeholder="https://linkedin.com/in/tu-perfil">
          </div>
          <div class="form-group">
            <label for="tiktok">TikTok</label>
            <input 
              type="url" 
              id="tiktok" 
              name="tiktok"
              [(ngModel)]="profile.socialNetworks.tiktok"
              placeholder="https://tiktok.com/@tu-perfil">
          </div>
          <div class="form-group">
            <label for="website">Sitio Web</label>
            <input 
              type="url" 
              id="website" 
              name="website"
              [(ngModel)]="profile.socialNetworks.website"
              placeholder="https://tu-sitio-web.com">
          </div>
        </div>
      </div>

      <div class="form-actions">
        <button type="submit" class="btn-primary" [disabled]="isLoading || !profileForm.form.valid">
          {{ isLoading ? 'Guardando...' : 'Guardar Cambios' }}
        </button>
      </div>
    </form>
  </div>

  <div class="loading-container" *ngIf="isLoading">
    <div class="loading-spinner"></div>
    <p>Cargando perfil...</p>
  </div>
</div>